function initMap(){var e={lat:22.0584376,lng:-159.4974082};map=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,scrollwheel:!1,styles:[{featureType:"all",elementType:"labels",stylers:[{lightness:63},{hue:"#ff0000"}]},{featureType:"administrative",elementType:"all",stylers:[{hue:"#000bff"},{visibility:"on"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"administrative",elementType:"labels",stylers:[{color:"#4a4a4a"},{visibility:"on"}]},{featureType:"administrative",elementType:"labels.text",stylers:[{weight:"0.01"},{color:"#727272"},{visibility:"on"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{color:"#ff0000"}]},{featureType:"administrative.country",elementType:"labels.text",stylers:[{color:"#ff0000"}]},{featureType:"administrative.province",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"administrative.province",elementType:"labels.text",stylers:[{color:"#545454"}]},{featureType:"administrative.locality",elementType:"labels.text",stylers:[{visibility:"on"},{color:"#737373"}]},{featureType:"administrative.neighborhood",elementType:"labels.text",stylers:[{color:"#7c7c7c"},{weight:"0.01"}]},{featureType:"administrative.land_parcel",elementType:"labels.text",stylers:[{color:"#404040"}]},{featureType:"landscape",elementType:"all",stylers:[{lightness:16},{hue:"#ff001a"},{saturation:-61}]},{featureType:"poi",elementType:"labels.text",stylers:[{color:"#828282"},{weight:"0.01"}]},{featureType:"poi.government",elementType:"labels.text",stylers:[{color:"#4c4c4c"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#00ff91"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{color:"#7b7b7b"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text",stylers:[{color:"#999999"},{visibility:"on"},{weight:"0.01"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#ff0011"},{lightness:53}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{color:"#626262"}]},{featureType:"transit",elementType:"labels.text",stylers:[{color:"#676767"},{weight:"0.01"}]},{featureType:"water",elementType:"all",stylers:[{hue:"#0055ff"}]}]}),vm=new ViewModel,ko.applyBindings(vm)}function googleError(){alert("At this time we are unable to load Google Maps")}var map,vm,Attraction=function(e){this.title=e.title,this.fact=e.fact,this.lat=e.location.lat,this.lng=e.location.lng,this.marker=e.marker,this.wikiTitle=e.wikiTitle},markers=[],ViewModel=function(){function e(e,t){var i=this;i.content=e,i.url=t}function t(e){e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(google.maps.Animation["null"])},2e3)}function a(e,t){function i(t,i){if(i==google.maps.StreetViewStatus.OK){var a=t.location.latLng,l=google.maps.geometry.spherical.computeHeading(a,e.position);f.setContent("<div>"+e.title+"</div><div>"+e.fact+'</div><div id="thumbnail"></div>');var o={position:a,pov:{heading:l,pitch:15}};new google.maps.StreetViewPanorama(document.getElementById("thumbnail"),o)}else f.setContent("<div>"+e.title+"</div><div>No Street View Found</div>")}if(t.marker!=e){f.setContent(""),t.marker=e,e.setIcon(r),t.addListener("closeclick",function(){e.setIcon(s),t.setMarker=null});var a=new google.maps.StreetViewService,l=50;a.getPanoramaByLocation(e.position,l,i),f.open(map,e)}}var l=this;l.myList=ko.observableArray([]),model.forEach(function(e){l.myList.push(new Attraction(e))}),l.currentAttraction=function(){a(this.marker,f),t(this.marker,u),wikiFill(this.wikiTitle)},l.filter=ko.observable(""),l.attractionList=ko.computed(function(){var e=l.filter().toLowerCase();if(e){var t=ko.utils.arrayFilter(l.myList(),function(t){return-1!==t.title.toLowerCase().indexOf(e)?(t.marker.setVisible(!0),!0):(t.marker.setVisible(!1),!1)});return t}return l.myList().forEach(function(e){e.marker&&e.marker.setVisible(!0)}),l.myList()}),l.articleList=ko.observableArray([]),wikiFill=function(t){var i=setTimeout(function(){alert("Wikipedia API could not be reached")},3e3);wikiUrl="https://en.wikipedia.org/w/api.php?action=opensearch&search="+t+"&format=json&callback=wikiCallback",$.ajax({url:wikiUrl,dataType:"jsonp",success:function(t){l.articleList.removeAll(),articleList=t[1],articleStr=articleList[0];var a="https://en.wikipedia.org/wiki/"+articleStr;l.articleList.push(new e(articleStr,a)),clearTimeout(i)}})};var o=new google.maps.LatLngBounds,s="https://maps.google.com/mapfiles/ms/icons/red-dot.png",r="https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",n="https://maps.google.com/mapfiles/ms/icons/green-dot.png";for(i=0;i<l.myList().length;i++){var m=new google.maps.LatLng(l.myList()[i].lat,l.myList()[i].lng),p=l.myList()[i].title,y=l.myList()[i].fact,c=l.myList()[i].wikiTitle,u=new google.maps.Marker({map:map,icon:s,position:m,title:p,fact:y,wikiTitle:c,animation:google.maps.Animation.DROP,id:i});markers.push(u),l.myList()[i].marker=u;var f=new google.maps.InfoWindow;u.addListener("click",function(){a(this,f),t(this,u),wikiFill(this.wikiTitle)}),u.addListener("mouseover",function(){this.setIcon(n)}),u.addListener("mouseout",function(){this.setIcon(s)}),o.extend(markers[i].position),map.fitBounds(o)}};
